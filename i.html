<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Mono and Stereo Panning Example</title>
Â  Â  <style>
body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    background-color: #f0f8ff;
    color: #2c3e50;
    text-align: center;
}
.container {
    background: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    max-width: 500px;
    width: 90%;
}
h1 {
    color: #1a567f;
    margin-bottom: 5px;
}
p {
    margin-bottom: 25px;
    font-style: italic;
}
.controls, .mode-buttons {
    margin-bottom: 20px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
}
.mode-buttons button {
    background-color: #3498db;
    color: white;
    border: none;
    padding: 12px 25px;
    margin: 5px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
}
.mode-buttons button:hover:not(:disabled) {
    background-color: #2980b9;
}
.mode-buttons button:disabled {
    background-color: #bdc3c7;
    cursor: not-allowed;
}
.mode-buttons button.active {
    background-color: #27ae60;
    box-shadow: 0 0 5px #27ae60;
}
input[type="range"] {
    width: 90%;
    margin-top: 15px;
}
.status {
    margin-top: 15px;
    font-weight: bold;
    font-size: 1.1em;
    color: #e67e22;
}
Â  Â  </style>
</head>
<body>

Â  Â  <div class="container">
Â  Â  Â  Â  <h1>ðŸŽ§ Mono and Stereo Panning Example</h1>
Â  Â  Â  Â  <p>Using a pure tone to avoid "Failed to fetch" errors. Use headphones!</p>

Â  Â  Â  Â  <div class="mode-buttons">
Â  Â  Â  Â  Â  Â  <button id="monoBtn">Play MONO</button>
Â  Â  Â  Â  Â  Â  <button id="stereoBtn">Play STEREO</button>
Â  Â  Â  Â  Â  Â  <button id="stopBtn" disabled>Stop</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  <h3>Stereo Pan Control</h3>
Â  Â  Â  Â  Â  Â  <p id="panHelp">Click the STEREO button to enable panning.</p>
Â  Â  Â  Â  Â  Â  <input type="range" id="panSlider" min="-1.0" max="1.0" step="0.01" value="0.0" disabled title="Pan Control">
Â  Â  Â  Â  Â  Â  <div class="status" id="panStatus">Pan: 0.0 (Center)</div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // JavaScript (Web Audio API)
Â  Â  Â  Â  
Â  Â  Â  Â  let audioCtx;
Â  Â  Â  Â  let oscillatorSource;
Â  Â  Â  Â  let panner;
Â  Â  Â  Â  
Â  Â  Â  Â  // --- Utility Functions ---

Â  Â  Â  Â  function updatePanStatus(value) {
Â  Â  Â  Â  Â  Â  let statusText;
Â  Â  Â  Â  Â  Â  if (value < -0.9) {
Â  Â  Â  Â  Â  Â  Â  Â  statusText = 'Pan: ' + value.toFixed(2) + ' (Extreme Left â¬…ï¸)';
Â  Â  Â  Â  Â  Â  } else if (value > 0.9) {
Â  Â  Â  Â  Â  Â  Â  Â  statusText = 'Pan: ' + value.toFixed(2) + ' (Extreme Right âž¡ï¸)';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â statusText = 'Pan: ' + value.toFixed(2) + ' (Center âºï¸)';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  document.getElementById('panStatus').textContent = statusText;
Â  Â  Â  Â  }

Â  Â  Â  Â  function resetState() {
Â  Â  Â  Â  Â  Â  document.getElementById('panSlider').disabled = true;
Â  Â  Â  Â  Â  Â  document.getElementById('panSlider').value = 0.0;
Â  Â  Â  Â  Â  Â  document.getElementById('panHelp').textContent = "Click the STEREO button to enable panning.";
Â  Â  Â  Â  Â  Â  document.getElementById('monoBtn').classList.remove('active');
Â  Â  Â  Â  Â  Â  document.getElementById('stereoBtn').classList.remove('active');
Â  Â  Â  Â  Â  Â  updatePanStatus(0.0);
Â  Â  Â  Â  }

Â  Â  Â  Â  function stopSound() {
Â  Â  Â  Â  Â  Â  if (oscillatorSource) {
Â  Â  Â  Â  Â  Â  Â  Â  // Fade out the sound nicely before stopping
Â  Â  Â  Â  Â  Â  Â  Â  oscillatorSource.gainNode.gain.setValueAtTime(oscillatorSource.gainNode.gain.value, audioCtx.currentTime);
Â  Â  Â  Â  Â  Â  Â  Â  oscillatorSource.gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.1);
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Stop after a short delay
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (oscillatorSource) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oscillatorSource.stop();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oscillatorSource = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resetState();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('stopBtn').disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }, 100); 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // --- Core Audio Functions ---

Â  Â  Â  Â  function playSound(mode) {
Â  Â  Â  Â  Â  Â  // 1. Stop any currently playing sound
Â  Â  Â  Â  Â  Â  stopSound();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // 2. Initialize AudioContext (must be done after a user gesture)
Â  Â  Â  Â  Â  Â  if (!audioCtx) {
Â  Â  Â  Â  Â  Â  Â  Â  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // 3. Create the Sound Source (Oscillator for simplicity)
Â  Â  Â  Â  Â  Â  const oscillator = audioCtx.createOscillator();
Â  Â  Â  Â  Â  Â  oscillator.type = 'sine'; // Pure tone
Â  Â  Â  Â  Â  Â  oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // A4 note
Â  Â  Â  Â  Â  Â  oscillator.start();

Â  Â  Â  Â  Â  Â  // 4. Create the Panner Node (Key for Stereo)
Â  Â  Â  Â  Â  Â  panner = audioCtx.createStereoPanner();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // 5. Create a GainNode for smooth control and volume
Â  Â  Â  Â  Â  Â  const gainNode = audioCtx.createGain();
Â  Â  Â  Â  Â  Â  gainNode.gain.setValueAtTime(0, audioCtx.currentTime); // Start at 0 volume
Â  Â  Â  Â  Â  Â  gainNode.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.5); // Ramp up volume

Â  Â  Â  Â  Â  Â  // 6. Connect the graph: Oscillator -> Panner -> Gain -> Destination
Â  Â  Â  Â  Â  Â  oscillator.connect(panner).connect(gainNode).connect(audioCtx.destination);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Store the source and gain node for control
Â  Â  Â  Â  Â  Â  oscillatorSource = oscillator;
Â  Â  Â  Â  Â  Â  oscillatorSource.gainNode = gainNode;

Â  Â  Â  Â  Â  Â  // --- Mode Specific Settings ---
Â  Â  Â  Â  Â  Â  if (mode === 'mono') {
Â  Â  Â  Â  Â  Â  Â  Â  // MONO: Set the pan to center (0.0)
Â  Â  Â  Â  Â  Â  Â  Â  panner.pan.setValueAtTime(0.0, audioCtx.currentTime);
Â  Â  Â  Â  Â  Â  Â  Â  resetState();
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('monoBtn').classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  updatePanStatus(0.0);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('panHelp').textContent = "MONO Mode: Panning disabled. Sound is fixed to center.";

Â  Â  Â  Â  Â  Â  } else if (mode === 'stereo') {
Â  Â  Â  Â  Â  Â  Â  Â  // STEREO: Reset pan to center, enable slider
Â  Â  Â  Â  Â  Â  Â  Â  resetState(); 
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('panSlider').disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('stereoBtn').classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('panHelp').textContent = "STEREO Mode: Move the slider to pan the sound left or right.";
Â  Â  Â  Â  Â  Â  Â  Â  // Note: panner.pan remains at 0.0 until the user moves the slider
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.getElementById('stopBtn').disabled = false;
Â  Â  Â  Â  }

Â  Â  Â  Â  function handlePanChange(event) {
Â  Â  Â  Â  Â  Â  // Only respond to pan changes if stereo mode is active
Â  Â  Â  Â  Â  Â  if (document.getElementById('stereoBtn').classList.contains('active') && panner) {
Â  Â  Â  Â  Â  Â  Â  Â  const panValue = parseFloat(event.target.value);
Â  Â  Â  Â  Â  Â  Â  Â  // Apply the pan value to the panner node
Â  Â  Â  Â  Â  Â  Â  Â  panner.pan.setValueAtTime(panValue, audioCtx.currentTime);
Â  Â  Â  Â  Â  Â  Â  Â  updatePanStatus(panValue);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Event Listeners ---
Â  Â  Â  Â  document.getElementById('monoBtn').addEventListener('click', () => playSound('mono'));
Â  Â  Â  Â  document.getElementById('stereoBtn').addEventListener('click', () => playSound('stereo'));
Â  Â  Â  Â  document.getElementById('stopBtn').addEventListener('click', stopSound);
Â  Â  Â  Â  document.getElementById('panSlider').addEventListener('input', handlePanChange);

Â  Â  </script>
</body> 
</html>
